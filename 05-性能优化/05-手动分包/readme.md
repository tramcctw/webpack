// 解决传输性能

# 问题

当多个文件引入了同一个第三方包时，会出现打包的文件中有公共的模块代码
这时需要将该模块代码单独打包成一个文件，有利于浏览器的缓存，因为该模块代码基本不会变动

分包：减少公共代码，降低总体积
当公共模块体积较大或较少变动时

# 手动分包

![](./assets/2020-02-24-13-24-57.png)

分两次打包

1. 首先单独的打包公共模块,公共模块被打包成了动态链接库(dll)，并生成资源清单(每一个 chunk 生成一个资源清单)
2. 根据入口模块进行正常打包
3. 打包时，如果发现模块中使用了资源清单中描述的模块，这直接引入暴露的模块入口即可

```js
"./node_modules/jquery/dist/jquery.js": function(){
    module.exports = jquery
}
```

## 总结

手动打包过程

1. 开启 output.library 暴露公共模块
2. 用 DllPlugin 创建资源清单
3. 用 DllReferencePlugin 使用资源清单

**注意**

1. 资源清单不参与运行
2. js 需要手动引用
3. 不要对小型的公共库使用

优点：
降低文件的体积
提高打包的速度
有利于浏览器缓存
缺点：
使用繁琐
若第三方库包含重复代码，则效果不理想
